# Environment Configuration Template for Guardify-AI
# Copy this file to .env and fill in your values

# ===== DATABASE CONFIGURATION (EXTERNAL) =====
# You must provide an external PostgreSQL database
DB_USER=guardify
DB_PASSWORD=your_secure_password_here
DB_NAME=guardify
DB_HOST=your_postgres_host
DB_PORT=5432
DATABASE_URL=postgresql://guardify:your_secure_password_here@your_postgres_host:5432/guardify

# ===== REDIS CONFIGURATION (INTERNAL) =====
# Redis runs as a container in the stack - no external setup needed
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ===== GOOGLE CLOUD CONFIGURATION =====
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/service-account.json
GOOGLE_PROJECT_LOCATION=us-central1
# For local development: 
# GOOGLE_APPLICATION_CREDENTIALS=./credentials/service-account.json

# Google Cloud Storage
GCS_BUCKET_NAME=your-video-storage-bucket
GCS_REGION=us-central1

# ===== FLASK CONFIGURATION =====
FLASK_ENV=production
FLASK_DEBUG=false
SECRET_KEY=your_very_secure_secret_key_minimum_32_characters_long
JWT_SECRET_KEY=your_jwt_secret_key_for_authentication_tokens

# ===== PROVISION ISR CONFIGURATION =====
# Credentials for video recording from security cameras
PROVISION_ISR_USERNAME=your_provision_username
PROVISION_ISR_PASSWORD=your_provision_password
PROVISION_ISR_BASE_URL=https://your-provision-isr-system.com

# Legacy variable names (required by video recording system)
PROVISION_USERNAME=your_provision_username
PROVISION_PASSWORD=your_provision_password
PROVISION_QR_CODE=your_provision_qr_code_if_needed

# Google Cloud variables for video recording
BUCKET_NAME=your-video-storage-bucket-name
GOOGLE_PROJECT_ID=your-gcp-project-id  # Same as GOOGLE_CLOUD_PROJECT
SERVICE_ACCOUNT_FILE=/app/credentials/service-account.json  # Same as GOOGLE_APPLICATION_CREDENTIALS

# ===== VIDEO RECORDING CONFIGURATION =====
VIDEO_RECORDING_INTERVAL=300  # seconds (5 minutes)
VIDEO_MAX_DURATION=300        # seconds (5 minutes)
VIDEO_QUALITY=medium          # low, medium, high
VIDEO_UPLOAD_ENABLED=true

# ===== AI ANALYSIS CONFIGURATION =====
# OpenAI Configuration (if using OpenAI models)
OPENAI_API_KEY=your_openai_api_key_here

# Azure Configuration (if using Azure AI)
AZURE_STORAGE_CONNECTION_STRING=your_azure_connection_string
AZURE_AI_ENDPOINT=your_azure_ai_endpoint
AZURE_AI_KEY=your_azure_ai_key

# Analysis settings
ANALYSIS_THRESHOLD=0.45       # Detection confidence threshold
ANALYSIS_MAX_ITERATIONS=3     # Analysis iterations per video
ANALYSIS_ENABLED=true

# ===== CELERY CONFIGURATION =====
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_WORKER_CONCURRENCY=1
CELERY_TASK_SOFT_TIME_LIMIT=1800  # 30 minutes
CELERY_TASK_TIME_LIMIT=2100       # 35 minutes

# ===== SECURITY CONFIGURATION =====
# CORS settings
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:80
CORS_ALLOW_CREDENTIALS=true

# Rate limiting
RATELIMIT_STORAGE_URL=redis://redis:6379/1
REQUESTS_PER_MINUTE=100

# ===== LOGGING CONFIGURATION =====
LOG_LEVEL=INFO
LOG_FILE=/app/logs/guardify.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ===== EMAIL CONFIGURATION (Optional) =====
# For alerts and notifications
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password
MAIL_DEFAULT_SENDER=your_email@gmail.com

# ===== MONITORING CONFIGURATION =====
# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30  # seconds

# Flower monitoring (Celery)
FLOWER_BASIC_AUTH_USERNAME=admin
FLOWER_BASIC_AUTH_PASSWORD=guardify123
FLOWER_PORT=5555

# ===== DEVELOPMENT SETTINGS =====
# Only for development environment
DEBUG_MODE=false
TESTING=false
WTF_CSRF_ENABLED=true

# ===== TIMEZONE CONFIGURATION =====
TIMEZONE=UTC

# ===== FILE STORAGE CONFIGURATION =====
UPLOAD_FOLDER=/app/data/uploads
MAX_CONTENT_LENGTH=104857600  # 100MB
ALLOWED_EXTENSIONS=mp4,avi,mov,wmv,flv,webm,mkv

# ===== CACHE CONFIGURATION =====
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://redis:6379/2
CACHE_DEFAULT_TIMEOUT=300  # 5 minutes

# ===== PAGINATION CONFIGURATION =====
EVENTS_PER_PAGE=20
VIDEOS_PER_PAGE=10
SHOPS_PER_PAGE=50

# ===== BACKUP CONFIGURATION =====
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30

# ===== NGINX CONFIGURATION (if using single container) =====
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_CLIENT_MAX_BODY_SIZE=100m

# ===== POSTGRESQL CONFIGURATION =====
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9